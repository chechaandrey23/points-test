<html>
	<head>
		<script type="module">
			
			// https://ru.wikibooks.org/wiki/%D0%A0%D0%B5%D0%B0%D0%BB%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D0%B8_%D0%B0%D0%BB%D0%B3%D0%BE%D1%80%D0%B8%D1%82%D0%BC%D0%BE%D0%B2/%D0%9A%D0%BE%D0%BC%D0%B1%D0%B8%D0%BD%D0%B0%D1%82%D0%BE%D1%80%D0%B8%D0%BA%D0%B0/%D0%A0%D0%B0%D0%B7%D0%BC%D0%B5%D1%89%D0%B5%D0%BD%D0%B8%D1%8F
			function PermutationsWithRepetition(src, len) {
				var K = len - 1, k = 0,
					N = src.length, n = 0,
					out = [],
					stack = [];
				
				function next(){
					while(true) {
						while(n < src.length) {
							out[k] = src[n++];
							if(k == K) {
								return out.slice(0);
							} else {
								if(n < src.length) {
									stack.push(k);
									stack.push(n);
								}
								k++;
								n = 0;
							}
						}
						if(stack.length == 0) break;
						
						n = stack.pop();
						k = stack.pop();
					}
					return false;
				}
				
				function rewind(){ k = 0; n = 0; out = []; stack = []; }
				
				function each(cb) {
					rewind();
					var v;
					while (v = next()) if (cb(v) === false) return;
				}
				
				return {
					next: next,
					each: each,
					rewind: rewind
				};
			}
			
			function newStr(str, args) {
				let newStr = '';
				
				for(let i=0, size=str.length; i<size; i++) {
					newStr += str[i]+(args[i]?args[i]:'');
				}
				
				return newStr;
			}
			
			function main(str) {
				str += '';
				let placementSize = str.length - 1;
				
				let gen = PermutationsWithRepetition(['', '.'], placementSize);
				
				let res = [], item;
				while((item = gen.next())) {
					res.push(newStr(str, item));
				}
				
				return res;
			}
			
			//console.log(main('abcd'));
			
			window.addEventListener('DOMContentLoaded', () => {
				document.getElementById('mock-form-calc').addEventListener('click', () => {
					let str = document.getElementById('mock-form-text').value;
					
					let data = '';
					
					if(str.length < 3) {
						data = '<h2>'+'There must be more than three characters in the line!!!'+'</h2>';
					} else {
						let rawData = main(str);
						
						for(let i=0, size=rawData.length; i<size; i++) {
							data += '<div style="display: flex; flex-direction: row;"><div style="width: 35px;">'+(i+1)+'</div><div>'+rawData[i]+'</div></div>';
						}
					}
					
					document.getElementById('mock-res').innerHTML = data;
				});
			});
			
		</script>
	</head>
	<body>
		<div id="mock-form" style="display: flex; flex-direction: row;">
			<div><input type="text" id="mock-form-text" /></div>
			<div style="padding-left: 15px;"><input type="button" value="calc" id="mock-form-calc" /></div>
		</div>
		<div id="mock-res" style="display: flex; flex-direction: column; padding: 10px;"></div>
	</body>
</html>
